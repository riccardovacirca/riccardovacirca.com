<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">
    <meta name="description" content="Projects by Riccardo Vacirca">
    <meta name="author" content="Riccardo Vacirca">
    <title>Projects - riccardo vacirca</title>
    <style>body{font-family:Helvetica,Arial,sans-serif;}h1,h2,h3,h4,h5,h6{margin:0;}h4{font-size:22px;}h6{font-size:16px;}pre{background-color:#efefef;overflow-x:auto;padding:10px;}.card{border:1px solid #efefef;}th{text-align:left;}hr{border:1px solid #eee;}a{color:#066;}code{color:mediumvioletred;}pre code{color:#333;line-height: 1.5;}</style>
    <!-- -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/themes/prism.min.css" rel="stylesheet">
    <!-- -->
    <style>
    body{margin:0;border-top:4px solid #17a2b8;position:relative;}
    .logo{color:#777}.title{color:#444;}.sub-title{color:#17a2b8;}main,footer{margin:0 auto;max-width:770px;}main,code{font-size:16px;}#main{padding-top:30px;}.font-anton{font-family:'Anton',sans-serif;}#db-diagram{max-width:678px;max-height:391px;width:100%;}td,th{font-size:14px;font-family:monospace,'Courier New',Courier;border-top:1px solid #ccc;}.card-body{padding:5px;}td{vertical-align:top;}
    .header-container{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;}
    .header-text{flex:1;}
    .header-avatar{flex-shrink:0;margin-left:20px;}
    .avatar-img{width:64px;height:64px;border-radius:50%;border:2px solid #17a2b8;display:none;}
    .site-menu{text-align:center;margin:20px 0;padding:10px 0;border-top:1px solid #eee;border-bottom:1px solid #eee;}
    .menu-item{color:#17a2b8;text-decoration:none;margin:0 20px;font-weight:500;}
    .menu-item:hover{color:#066;text-decoration:none;}
    .project-card{border:1px solid #eee;border-radius:5px;padding:15px;margin-bottom:15px;}
    footer a{color:#17a2b8;text-decoration:none;margin:0 2px;}
    footer a:hover{color:#066;text-decoration:none;}
    </style>
</head>
<body><main><div id="main" class="container">
<!----------------------------------------------------------------------------->
<div class="header-container">
  <div class="header-text">
    <h4 class="display-5 font-anton logo">riccardo vacirca</h4>
    <h1 class="display-5 font-anton logo">personal website / projects</h1>
  </div>
  <div class="header-avatar">
    <img id="user-avatar" src="" alt="Profile Avatar" class="avatar-img">
  </div>
</div>

<nav class="site-menu">
  <a href="../" class="menu-item">home</a>
  <a href="./" class="menu-item">projects</a>
  <!-- a href="../articles/" class="menu-item">articles</a -->
  <a href="../contacts/" class="menu-item">contacts</a>
</nav>

<!----------------------------------------------------------------------------->

<div id="projects-list">
    <p>Loading projects...</p>
</div>

<!----------------------------------------------------------------------------->
</div>
</main>
<footer><div class="container">
<!----------------------------------------------------------------------------->
<hr>
<p class="mb-3 text-muted">
    &copy; 2020-2025 Riccardo Vacirca
    <a href="https://www.linkedin.com/in/riccardovacirca"><i class="fa fa-linkedin-square"></i></a>
    <a href="https://github.com/riccardovacirca"><i class="fa fa-git-square"></i></a><br>
    <small>All right reserved</small>
</p>
<!----------------------------------------------------------------------------->
</div></footer>
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/components/prism-c.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.20.0/axios.min.js" integrity="sha512-quHCp3WbBNkwLfYUMd+KwBAgpVukJu5MncuQaWXgCrfgcxCJAq/fo+oqrRKOj+UKEmyMCG3tb8RB63W+EmrOBg==" crossorigin="anonymous"></script>
<script>
// Static fallback project data
const fallbackProjects = [
  {
    name: "microservice",
    description: "C/C++ Microservice Library",
    language: "C",
    updated_at: "2023-11-20T14:45:00Z",
    stargazers_count: 42,
    forks_count: 8,
    license: { name: "GPL-2.0" },
    html_url: "https://github.com/riccardovacirca/microservice",
    homepage: null,
    latest_release: null
  },
  {
    name: "grapheme",
    description: "Graphometric analysis project based on an application of the Power Spectral Density",
    language: "Python",
    updated_at: "2023-11-25T10:15:00Z",
    stargazers_count: 28,
    forks_count: 5,
    license: { name: "MIT" },
    html_url: "https://github.com/riccardovacirca/grapheme",
    homepage: null,
    latest_release: null
  },
  {
    name: "mod_helloworld",
    description: "Simple HelloWorld microservice module",
    language: "Makefile",
    updated_at: "2023-10-15T12:30:00Z",
    stargazers_count: 5,
    forks_count: 2,
    license: { name: "GPL-2.0" },
    html_url: "https://github.com/riccardovacirca/mod_helloworld",
    homepage: null,
    latest_release: null
  }
];

// Function to display projects
function displayProjects(projects, isLiveData = false) {
  const whitelist = ['microservice', 'grapheme', 'mod_helloworld'];
  let projectsHtml = '';
  
  if (!isLiveData) {
    projectsHtml += '<div class="alert alert-info"><small>Using cached data due to API limits</small></div>';
  }
  
  projects.forEach(project => {
    if (whitelist.includes(project.name)) {
      const projectUrl = project.name === 'microservice' ? '../microservice/' 
                       : project.name === 'grapheme' ? '../grapheme/'
                       : project.name === 'mod_helloworld' ? '../mod_helloworld/'
                       : project.html_url;
      const linkTarget = (project.name === 'microservice' || project.name === 'grapheme' || project.name === 'mod_helloworld') ? '' : 'target="_blank"';
      
      projectsHtml += `
        <div class="project-card">
          <div class="row">
            <div class="col-md-8">
              <h3><strong><a href="${projectUrl}" ${linkTarget} style="color: inherit; text-decoration: none;">${project.name}</a></strong> ${project.latest_release ? `<span class="badge badge-success">${project.latest_release}</span>` : ''}</h3>
              ${project.description ? `<p>${project.description}</p>` : ''}
              <div>
                <strong>Language:</strong> ${project.language || 'N/A'}<br>
                <strong>Updated:</strong> ${new Date(project.updated_at).toLocaleDateString()}
                ${project.license ? `<br><strong>License:</strong> ${project.license.name}` : ''}
              </div>
            </div>
            <div class="col-md-4 text-right">
              <div class="mb-2">
                <span class="badge badge-info">‚≠ê ${project.stargazers_count}</span>
                <span class="badge badge-secondary">üç¥ ${project.forks_count}</span>
              </div>
              ${project.homepage ? `<a href="${project.homepage}" class="btn btn-sm btn-outline-info mb-1" target="_blank"><i class="fa fa-external-link"></i> Homepage</a><br>` : ''}
              <a href="${project.html_url}" class="btn btn-sm btn-info" target="_blank"><i class="fa fa-github"></i> GitHub</a>
            </div>
          </div>
        </div>
      `;
    }
  });
  
  document.getElementById('projects-list').innerHTML = projectsHtml || '<p>No projects found</p>';
}

// Try to fetch repositories from GitHub API, fallback to static data
axios({
  method: "get",
  url: "https://api.github.com/users/riccardovacirca/repos",
  headers: {"Accept": "application/vnd.github.v3+json"}
}).then((repos) => {
  console.log('Successfully fetched repository data from GitHub API');
  const whitelist = ['microservice', 'grapheme', 'mod_helloworld'];
  const filteredRepos = repos.data.filter(repo => whitelist.includes(repo.name));
  
  displayProjects(filteredRepos, true);
  
  // Fetch release information for each repo
  filteredRepos.forEach(repo => {
    axios({
      method: "get",
      url: "https://api.github.com/repos/riccardovacirca/"+repo.name+"/releases",
      headers: {"Accept": "application/vnd.github.v3+json"}
    }).then((rel) => {
      if (rel.data && rel.data.length > 0) {
        const releaseElement = document.querySelector(`[href*="${repo.name}"]`).closest('.project-card').querySelector('h3');
        if (releaseElement && !releaseElement.querySelector('.badge-success')) {
          releaseElement.innerHTML += ` <span class="badge badge-success">${rel.data[0].tag_name}</span>`;
        }
      }
    }).catch((err) => {
      console.log('Release API error for', repo.name, '- using fallback if available');
      // Fallback release info is already included in the fallback data
    });
  });
}).catch((err) => {
  console.log('GitHub API error for repositories, using fallback data:', err.response?.status);
  displayProjects(fallbackProjects, false);
});

// Try to fetch user avatar from GitHub API, fallback to static data
axios({
  method: "get",
  url: "https://api.github.com/users/riccardovacirca",
  headers: {"Accept": "application/vnd.github.v3+json"}
}).then((user) => {
  console.log('Successfully fetched user data from GitHub API');
  const avatarImg = document.getElementById('user-avatar');
  avatarImg.src = user.data.avatar_url;
  avatarImg.style.display = 'block';
}).catch((err) => {
  console.log('GitHub API error for user data, using fallback:', err.response?.status);
  const avatarImg = document.getElementById('user-avatar');
  avatarImg.src = "https://avatars.githubusercontent.com/u/3167550?v=4";
  avatarImg.style.display = 'block';
});
</script>
</body>
</html>